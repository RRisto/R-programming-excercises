{
    "contents" : "setwd(\"C://Users//risto//Documents//Minu asjad//Statistika, mudelid, excel//R//Coursera//courses-master//02_RProgramming//homework\")\n\nnum_helper <- function(state_subset, col_num, num) {\n    # get \"attack\", \"failure\" and \"pneumonia\" vector\n    outcome_arr <- as.numeric(state_subset[, col_num])\n    len <- dim(state_subset[!is.na(outcome_arr), ])[1]\n    if (num == \"best\") {\n        rank <- rank_helper(state_subset, outcome_arr, 1)\n    } else if (num == \"worst\") {\n        rank <- rank_helper(state_subset, outcome_arr, len)\n    } else if (num > len) {\n        rank <- NA\n    } else {\n        rank <- rank_helper(state_subset, outcome_arr, num)\n    }\n    result <- rank\n    return(result)\n}\nrank_helper <- function(state_subset, outcome_arr, num) {\n    result <- state_subset[, 2][order(outcome_arr, state_subset[, 2])[num]]\n    return(result)\n}\nrankall <- function(outcome, num = \"best\") {\n    ## Read outcome data\n    ## Check that state and outcome are valid\n    ## For each state, find the hospital of the given rank\n    ## Return a data frame with the hospital names and the\n    ## (abbreviated) state name\n    # read the data file\n    directory <- \"./data/outcome-of-care-measures.csv\"\n    data <- read.csv(directory, colClasses=\"character\")\n    valid_outcomes <- c(\"heart attack\", \"heart failure\", \"pneumonia\")\n    state_arr <- sort(unique(data$State))\n    arr_len <- length(state_arr)\n    hospital <- rep(\"\", arr_len)\n    if (!outcome %in% valid_outcomes) {\n        stop(\"invalid outcome\")\n    } else {\n        for(i in 1:arr_len) {\n            # loop for each state\n            state_subset <- data[data[, 7]==state_arr[i], ]\n            if(outcome == \"heart attack\") {\n                hospital[i] <- num_helper(state_subset, 11, num)\n            } else if (outcome == \"heart failure\") {\n                hospital[i] <- num_helper(state_subset, 17, num)\n            } else {\n                hospital[i] <- num_helper(state_subset, 23, num)\n            }\n        }\n    }\n    # create the data frame to return\n    df <- data.frame(hospital=hospital, state=state_arr)\n    result <- df\n    return(result)\n}\n# tests\nhead(rankall(\"heart attack\", 20), 10)\ntail(rankall(\"pneumonia\", \"worst\"), 3)\ntail(rankall(\"heart failure\"), 10)",
    "created" : 1427642508553.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1113436304",
    "id" : "F7D1BC3B",
    "lastKnownWriteTime" : 1427642637,
    "path" : "~/Minu asjad/Statistika, mudelid, excel/R/Coursera/courses-master/02_RProgramming/homework/rankall.R",
    "project_path" : "rankall.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}